(this["webpackJsonpnosso-predio-client"]=this["webpackJsonpnosso-predio-client"]||[]).push([[0],{34:function(e,t,a){e.exports=a(65)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(30),r=a.n(l),s=(a(39),a(2)),c=a(3),o=a(1),u=a(6),d=a(5),h=(a(40),a(7)),m=a(4),g=(a(41),function(e){return i.a.createElement("nav",{className:"nav-main-box"},i.a.createElement("div",{className:"nav-left-side"},i.a.createElement(m.c,{className:"nav-link",to:"/"},"Nosso Predio")),i.a.createElement("div",null,e.user?i.a.createElement("div",{className:"nav-link"},i.a.createElement(m.c,{className:"nav-link",to:"/perfil"},"Perfil"),i.a.createElement("button",{className:"nav-link",onClick:function(){return e.logout()}},"Logout")):i.a.createElement("div",{className:"nav-right-side"},i.a.createElement(m.c,{className:"nav-link",to:"/signup"},"Signup"),i.a.createElement(m.c,{className:"nav-link",to:"/login"},"Login"))))}),v=a(16),p=a.n(v),b=function(){function e(){Object(s.a)(this,e),this.service=p.a.create({baseURL:"https://nosso-predio.herokuapp.com/api",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e,t,a){return this.service.post("/signup",{email:e,password:t,name:a}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.service.post("/login",{email:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.service.get("/logout",{}).then((function(e){return e.data}))}},{key:"loggedin",value:function(){return this.service.get("/loggedin",{}).then((function(e){return e.data}))}},{key:"edit",value:function(e,t,a){return this.service.post("/edit-user/".concat(a),{email:e,name:t},{new:!0}).then((function(e){return e.data}))}},{key:"editPassword",value:function(e,t){return this.service.post("/edit-password/".concat(t),{password:e},{new:!0}).then((function(e){return e.data}))}}]),e}(),E=a(9),f=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",name:""},n.service=new b,n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,i=a.password,l=a.name;this.service.signup(n,i,l).then((function(e){t.setState({email:"",password:"",name:""}),t.props.getUser(e),t.props.history.push("/pagina-principal")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:""},i.a.createElement("h1",null,"Cadastrar"),i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{className:"",type:"text",name:"name",value:this.state.name,onChange:this.handleChange}))),i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}))),i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Senha:"),i.a.createElement("input",{className:"",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),i.a.createElement("input",{className:"button",type:"submit",value:"Signup"})),i.a.createElement("p",null,"J\xe1 tem uma conta?",i.a.createElement(m.b,{to:"/login"}," Entre")))}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.service=new b,n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,i=a.password;this.service.login(n,i).then((function(e){t.setState({email:"",password:""}),t.props.getUser(e),t.props.history.push("/pagina-principal")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:""},i.a.createElement("h1",null,"Entrar"),i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Email:"),i.a.createElement("input",{className:"",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}))),i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Senha:"),i.a.createElement("input",{className:"",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}))),i.a.createElement("input",{className:"button",type:"submit",value:"Entrar"})),i.a.createElement("p",null,"N\xe3o tem uma conta?",i.a.createElement(m.b,{to:"/signup"}," Cadastre-se")))}}]),a}(n.Component),S=function(){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h1",null,"Nosso Pr\xe9dio")),i.a.createElement("div",null,i.a.createElement(m.b,{to:"/signup"},"Cadastre-se agora")," ",i.a.createElement("br",null),i.a.createElement(m.b,{to:"/pagina-principal"},"Pagina principal")),i.a.createElement("div",null,i.a.createElement("h2",null,"Sobre"),i.a.createElement("p",null,"blablabla")))},y=a(33),O=function(e){var t=e.component,a=e.user,n=e.getUser,l=Object(y.a)(e,["component","user","getUser"]);return console.log(a),i.a.createElement(h.b,Object.assign({},l,{render:function(e){return a?i.a.createElement(t,Object.assign({},e,{user:a,getUser:n})):i.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},k=a(32),j=function(){function e(){Object(s.a)(this,e),this.service=p.a.create({baseURL:"https://nosso-predio.herokuapp.com/api",withCredentials:!0})}return Object(c.a)(e,[{key:"getUser",value:function(e){return this.service.get("/user/".concat(e)).then((function(e){return e.data}))}},{key:"getAllBuildings",value:function(){return this.service.get("/buildings",{}).then((function(e){return e.data}))}},{key:"addBuilding",value:function(e,t,a){return this.service.post("/add-building",{name:e,cep:t,number:a},{new:!0}).then((function(e){return e.data}))}},{key:"getBuildingDetails",value:function(e){return this.service.get("/building/".concat(e)).then((function(e){return e.data}))}},{key:"addService",value:function(e,t,a,n,i,l,r){return this.service.post("/building/".concat(r,"/add-service"),{name:e,description:t,category:a,price:n,date:i,apartment:l},{new:!0}).then((function(e){return e.data}))}},{key:"getAllServices",value:function(){return this.service.get("/services").then((function(e){return e.data}))}},{key:"getServiceDetails",value:function(e,t){return this.service.get("/building/".concat(e,"/service/").concat(t)).then((function(e){return e.data}))}},{key:"getAllOrders",value:function(){return this.service.get("/orders").then((function(e){return e.data}))}},{key:"addOrder",value:function(e,t,a){return this.service.post("/building/".concat(e,"/service/").concat(t,"/add-order"),{quantity:a},{new:!0}).then((function(e){return e.data}))}},{key:"buildingInvite",value:function(e){return this.service.get("building-invitation/".concat(e),{new:!0}).then((function(e){return e.data}))}},{key:"changeStatus",value:function(e,t,a,n){return this.service.post("/building/".concat(e,"/service/").concat(t,"/status-order/").concat(a),{status:n},{new:!0}).then((function(e){return e.data}))}},{key:"editBuilding",value:function(e,t,a,n){return this.service.post("/edit-building/".concat(e),{name:t,cep:a,number:n}).then((function(e){return e.data}))}},{key:"editService",value:function(e,t,a,n,i,l,r,s){return this.service.post("/building/".concat(e,"/edit-service/").concat(t),{name:a,description:n,price:i,category:l,apartment:r,date:s}).then((function(e){return e.data}))}}]),e}(),w=(a(64),function(e){return i.a.createElement("div",null,e.services.map((function(e,t){return i.a.createElement("div",{key:t,className:"building-box"},i.a.createElement("h2",null,e.name),i.a.createElement(m.b,{to:"/condominio/".concat(e.building,"/servi\xe7o/").concat(e._id)},"Acessar"))})))}),N=function(e){var t=e.orders,a=["Pendente","Confirmado","Entregue","Calcelado"];return i.a.createElement("div",null,t.map((function(t,n){return i.a.createElement("div",{key:n,className:"building-box"},i.a.createElement(m.b,{to:"/condominio/".concat(t.service.building,"/servi\xe7o/").concat(t.service._id)},i.a.createElement("h3",null,t.service.name)),i.a.createElement("h3",null,"Quantidade: ",t.quantity),e.user.services.includes(t.service._id)?i.a.createElement("form",{onChange:function(a){return e.handleStatus(t.service.building,t.service._id,t._id,a.target.value)}},i.a.createElement("label",null,"Status: "),i.a.createElement("select",{name:"status"},i.a.createElement("option",{value:t.status},t.status),a.filter((function(e){return e!==t.status})).map((function(e,t){return i.a.createElement("option",{key:t,value:e},e)})))):i.a.createElement("div",null,i.a.createElement("p",null,"Status do pedido: ",t.status),"Cancelado"===t.status?i.a.createElement(i.a.Fragment,null):i.a.createElement("button",{onClick:function(a){return e.handleStatus(t.service.building,t.service._id,t._id,"Cancelado")}},"Cancelar pedido")))})))},U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={buildings:[],orders:[],activeOrders:[],services:[],search:"",buildingApiCalled:!1,serviceApiCalled:!1,orderAPICalled:!1,toggleButton:!1,confirmationCode:"",toggleStatusButton:!0},n.service=new j,n.handleChangeCode=n.handleChangeCode.bind(Object(o.a)(n)),n.handleChangeSearch=n.handleChangeSearch.bind(Object(o.a)(n)),n.handleOnSubmit=n.handleOnSubmit.bind(Object(o.a)(n)),n.handleStatus=n.handleStatus.bind(Object(o.a)(n)),n.handleToggleStatus=n.handleToggleStatus.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChangeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase()})}},{key:"handleChangeCode",value:function(e){var t=this;this.setState({confirmationCode:e.target.value},(function(){return t.getBuildings()}))}},{key:"getBuildings",value:function(){var e=this;this.state.buildingApiCalled||this.service.getAllBuildings().then((function(t){e.setState({buildings:t,buildingApiCalled:!0})}))}},{key:"getUserBuildings",value:function(){var e=this;this.state.buildingApiCalled||this.service.getAllBuildings().then((function(t){e.setState({buildingApiCalled:!0,buildings:t.filter((function(t){return t.residents.includes(e.props.user._id)}))})}))}},{key:"getUserServices",value:function(){var e=this;this.state.serviceApiCalled||this.service.getAllServices().then((function(t){e.setState({serviceApiCalled:!0,services:t.filter((function(t){return t.owner.includes(e.props.user._id)}))})}))}},{key:"getUserOrders",value:function(){var e=this;this.state.orderAPICalled||this.service.getAllOrders().then((function(t){e.setState({orders:t.filter((function(t){return t.origin.includes(e.props.user._id)})),orderAPICalled:!0})}))}},{key:"handleToggle",value:function(){this.setState({toggleButton:!this.state.toggleButton})}},{key:"handleToggleStatus",value:function(){this.setState({toggleStatusButton:!this.state.toggleStatusButton})}},{key:"handleOnSubmit",value:function(e){var t=this;e.preventDefault(),this.service.buildingInvite(this.state.confirmationCode).then((function(e){t.setState({toggleButton:!t.state.toggleButton,confirmationCode:"",buildingApiCalled:!1})}))}},{key:"handleStatus",value:function(e,t,a,n){var i=this;this.service.changeStatus(e,t,a,n).then((function(e){return i.setState({orderAPICalled:!1})}))}},{key:"activeOrders",value:function(){var e=Object(k.a)(this.state.orders);this.setState({activeOrders:e.filter((function(e){return"Cancelado"!==e.status}))})}},{key:"render",value:function(){var e=this;return this.props.user.buildings.length<1?(this.getBuildings(),i.a.createElement("div",null,i.a.createElement("h1",null," Main Page ")," ",i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(m.b,{to:"/adicionar-condominio"},"Adicionar Condominio")," ",i.a.createElement("br",null)," ",i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return e.handleToggle()}},"J\xe1 tem um convite? Junte-se ao seu condom\xednio")," ",i.a.createElement("br",null)," ",i.a.createElement("br",null),this.state.toggleButton?i.a.createElement("form",{onSubmit:this.handleOnSubmit,type:"submit"},i.a.createElement("input",{onChange:this.handleChangeCode,value:this.state.confirmationCode,type:"text",name:"confirmationCode",placeholder:"insira seu c\xf3digo de acesso"}),i.a.createElement("button",{type:"submit"},"Enviar")):i.a.createElement(i.a.Fragment,null),i.a.createElement("input",{type:"text",value:this.state.search,onChange:this.handleChangeSearch,placeholder:"Buscar pelo nome"}),this.state.buildings.filter((function(t){return t.name.toLowerCase().includes(e.state.search)})).map((function(e,t){return i.a.createElement("div",{key:t,className:"building-box"},i.a.createElement("h1",null,e.name))})))))):(this.getUserBuildings(),this.getUserServices(),this.getUserOrders(),i.a.createElement("div",null,i.a.createElement("h1",null," Main Page "),i.a.createElement("div",null,i.a.createElement(m.b,{to:"/adicionar-condominio"},"Adicionar Condominio"),"  ",i.a.createElement("br",null)," ",i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return e.handleToggle()}},"J\xe1 tem um convite? Junte-se ao seu condom\xednio")," ",i.a.createElement("br",null)," ",i.a.createElement("br",null),this.state.toggleButton?i.a.createElement("form",{onSubmit:this.handleOnSubmit,type:"submit"},i.a.createElement("input",{onChange:this.handleChangeCode,value:this.state.confirmationCode,type:"text",name:"confirmationCode",placeholder:"insira seu c\xf3digo de acesso"}),i.a.createElement("button",{type:"submit"},"Enviar")):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("input",{type:"text",value:this.state.search,onChange:this.handleChangeSearch,placeholder:"Buscar pelo nome"})),i.a.createElement("div",null,i.a.createElement("h3",null,"Meus Condominios"),this.state.buildings.filter((function(t){return t.name.toLowerCase().includes(e.state.search)})).map((function(e,t){return i.a.createElement("div",{key:t,className:"building-box"},i.a.createElement("h1",null,e.name),i.a.createElement(m.b,{to:"/condominio/".concat(e._id)},"Acessar"))}))),i.a.createElement("div",null,i.a.createElement("h3",null,"Meus Servi\xe7os"),this.props.user.services.length>0?i.a.createElement(w,Object.assign({services:this.state.services},this.props)):i.a.createElement("div",null)),i.a.createElement("div",null,i.a.createElement("h3",null,"Meus Pedidos"),i.a.createElement("button",{onClick:this.handleToggleStatus},this.state.toggleStatusButton?"Mostrar todos os pedidos":"Mostrar somente pedidos ativos"),this.state.toggleStatusButton?i.a.createElement(N,Object.assign({activeOrders:this.activeOrders,handleStatus:this.handleStatus,orders:this.state.orders.filter((function(e){return"Cancelado"!==e.status}))},this.props)):i.a.createElement(N,Object.assign({handleStatus:this.handleStatus,orders:this.state.orders},this.props)))))}}]),a}(n.Component),A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:"",cep:"",number:""},n.service=new j,n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.name,i=a.cep,l=a.number;this.service.addBuilding(n,i,l).then((function(e){t.props.history.push("/pagina-principal")})),console.log(this.props)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Adicione seu Condom\xednio"),i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"name",value:this.state.name}),i.a.createElement("label",null,"CEP:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"cep",value:this.state.cep}),i.a.createElement("label",null,"N\xfamero:"),i.a.createElement("input",{onChange:this.handleChange,type:"number",name:"number",value:this.state.number}),i.a.createElement("button",{type:"submit"},"Salvar"))))}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a);var i=(n=t.call(this,e)).props.building.name,l=n.props.building.address,r=l.cep,c=l.number;return n.state={name:i,cep:r,number:c},n.service=new j,n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.building._id,n=this.state,i=n.name,l=n.cep,r=n.number;this.service.editBuilding(a,i,l,r).then((function(e){console.log(e),t.props.handleClick(),t.props.getEditedBuilding(e)}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"name",value:this.state.name}),i.a.createElement("label",null,"cep:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"cep",value:this.state.cep}),i.a.createElement("label",null,"N\xfamero:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"number",value:this.state.number}),i.a.createElement("button",{type:"submit"},"Salvar")))}}]),a}(n.Component),B=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={building:{},services:[],search:"",buildingApiCalled:!1,serviceApiCalled:!1,toggleEdit:!1},n.service=new j,n.handleClick=n.handleClick.bind(Object(o.a)(n)),n.getEditedBuilding=n.getEditedBuilding.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.setState({toggleEdit:!this.state.toggleEdit})}},{key:"getBuildingDetails",value:function(){var e=this;if(!this.state.buildingApiCalled){var t=this.props.match.params;this.service.getBuildingDetails(t.id).then((function(t){console.log(t),e.setState({building:t,buildingApiCalled:!0})}))}}},{key:"getEditedBuilding",value:function(e){this.setState({building:e})}},{key:"getBuildingServices",value:function(){var e=this;this.state.serviceApiCalled||this.service.getAllServices().then((function(t){e.setState({serviceApiCalled:!0,services:t.filter((function(t){return t.building.includes(e.state.building._id)}))})}))}},{key:"render",value:function(){return this.getBuildingDetails(),this.getBuildingServices(),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h1",null,this.state.building.name),this.props.user._id===this.state.building.owner?i.a.createElement("button",{onClick:this.handleClick},"Editar"):i.a.createElement(i.a.Fragment,null),this.state.toggleEdit?i.a.createElement(P,{getEditedBuilding:this.getEditedBuilding,building:this.state.building,handleClick:this.handleClick}):i.a.createElement(i.a.Fragment,null)),this.state.building.owner===this.props.user._id?i.a.createElement("p",null,"Link para convidar outros:"," ","http://localhost:3000/".concat(this.state.building.confirmationCode)):i.a.createElement(i.a.Fragment,null),i.a.createElement("div",null,i.a.createElement(m.b,{to:"/condominio/".concat(this.state.building._id,"/adicionar-servi\xe7o")},"Adicionar Servi\xe7o/Produto")),i.a.createElement("h2",null,"Servi\xe7os/Produtos dispon\xedveis"),i.a.createElement(w,Object.assign({services:this.state.services},this.props)))}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={name:"",description:"",category:"",price:"",date:"",apartment:""},n.service=new j,n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.match.params.id,n=this.state,i=n.name,l=n.description,r=n.category,s=n.price,c=n.date,o=n.apartment;this.service.addService(i,l,r,s,c,o,a).then((function(e){t.props.history.push("/condominio/".concat(a))}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Adicione seu Servi\xe7o/Produto"),i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"name",value:this.state.name}),i.a.createElement("label",null,"Descri\xe7\xe3o:"),i.a.createElement("input",{onChange:this.handleChange,type:"text-area",name:"description",value:this.state.description}),i.a.createElement("label",null,"Categoria:"),i.a.createElement("select",{onChange:this.handleChange,name:"category"},i.a.createElement("option",{value:"Produto"},"Produto"),i.a.createElement("option",{value:"Servi\xe7o"},"Servi\xe7o")),i.a.createElement("label",null,"Pre\xe7o:"),i.a.createElement("input",{onChange:this.handleChange,type:"number",name:"price",value:this.state.price}),i.a.createElement("label",null,"Data:"),i.a.createElement("input",{onChange:this.handleChange,type:"date",name:"date",value:this.state.date}),i.a.createElement("label",null,"Complemento:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"apartment",value:this.state.apartment}),i.a.createElement("button",{type:"submit"},"Salvar"))))}}]),a}(n.Component),F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={quantity:0},n.service=new j,n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value;this.setState({quantity:t})}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.quantity,n=this.props,i=n.service,l=n.building;this.service.addOrder(l,i,a).then((function(e){t.setState({quantity:0}),t.props.history.push("/pagina-principal")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("div",{className:""},i.a.createElement("div",{className:""},i.a.createElement("label",null,"Quantidade:"),i.a.createElement("input",{className:"",type:"number",name:"quantity",value:this.state.quantity,onChange:this.handleChange}))),i.a.createElement("input",{className:"button",type:"submit",value:"Pedir"}))}}]),a}(n.Component),_=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a);var i=(n=t.call(this,e)).props.service,l=i.name,r=i.description,c=i.category,u=i.price,d=i.date,h=i.apartment;return n.state={name:l,description:r,category:c,price:u,date:d,apartment:h},n.service=new j,n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.service.building._id,n=this.props.service._id,i=this.state,l=i.name,r=i.description,s=i.price,c=i.category,o=i.apartment,u=i.date;this.service.editService(a,n,l,r,s,c,o,u).then((function(e){console.log(e),t.props.handleClick(),t.props.getEditedService(e)}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"name",value:this.state.name}),i.a.createElement("label",null,"Descri\xe7\xe3o:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"description",value:this.state.description}),i.a.createElement("label",null,"Pre\xe7o:"),i.a.createElement("input",{onChange:this.handleChange,type:"number",name:"price",value:this.state.price}),i.a.createElement("label",null,"Categoria:"),"Produto"===this.props.service.category?i.a.createElement("select",{onChange:this.handleChange,name:"category"},i.a.createElement("option",{value:"Produto"},"Produto"),i.a.createElement("option",{value:"Servi\xe7o"},"Servi\xe7o")):i.a.createElement("select",{onChange:this.handleChange,name:"category"},i.a.createElement("option",{value:"Servi\xe7o"},"Servi\xe7o"),i.a.createElement("option",{value:"Produto"},"Produto")),i.a.createElement("label",null,"Complemento:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"apartment",value:this.state.apartment}),i.a.createElement("label",null,"Data:"),i.a.createElement("input",{onChange:this.handleChange,type:"date",name:"date",value:this.state.date}),i.a.createElement("button",{type:"submit"},"Salvar")))}}]),a}(n.Component),D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={service:{},orders:[],serviceAPICalled:!1,orderAPICalled:!1,toggleEdit:!1},n.service=new j,n.handleStatus=n.handleStatus.bind(Object(o.a)(n)),n.getEditedService=n.getEditedService.bind(Object(o.a)(n)),n.handleClick=n.handleClick.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.setState({toggleEdit:!this.state.toggleEdit})}},{key:"getServiceDetails",value:function(){var e=this;if(!this.state.serviceAPICalled){var t=this.props.match.params;this.service.getServiceDetails(t.id,t.servicoId).then((function(t){e.setState({service:t,serviceAPICalled:!0})}))}}},{key:"getServiceOrders",value:function(){var e=this;this.state.orderAPICalled||this.service.getAllOrders().then((function(t){e.setState({orders:t.filter((function(t){return t.service._id.includes(e.state.service._id)})),orderAPICalled:!0})}))}},{key:"handleStatus",value:function(e,t,a,n){this.service.changeStatus(e,t,a,n).then((function(e){return console.log(e)}))}},{key:"getEditedService",value:function(e){this.setState({service:e})}},{key:"render",value:function(){return this.getServiceDetails(),this.getServiceOrders(),i.a.createElement("div",null,i.a.createElement(m.b,{to:"/condominio/".concat(this.state.service.building,"/adicionar-servi\xe7o")},"Adicionar Servi\xe7o/Produto"),i.a.createElement("br",null),i.a.createElement("h1",null,this.state.service.name),i.a.createElement("h4",null,this.state.service.date),i.a.createElement("p",null,this.state.service.category),i.a.createElement("p",null,this.state.service.description),i.a.createElement("img",{src:this.state.service.image,alt:this.state.service.name}),this.state.service.owner===this.props.user._id?i.a.createElement("div",null,this.state.toggleEdit?i.a.createElement(_,{handleClick:this.handleClick,getEditedService:this.getEditedService,service:this.state.service}):i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:this.handleClick},"Editar")),i.a.createElement("h3",null,"Pedidos:"),i.a.createElement(N,Object.assign({handleStatus:this.handleStatus,building:this.state.service.building,orders:this.state.orders},this.props))):i.a.createElement("div",null,i.a.createElement("h3",null,"Fa\xe7a seu pedido"),i.a.createElement(F,Object.assign({},this.props,{service:this.state.service._id}))))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a);var i=(n=t.call(this,e)).props.user;return n.state={toggleEdit:!1,name:i.name,email:i.email,password:i.password},n.handleClick=n.handleClick.bind(Object(o.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handlePasswordSubmit=n.handlePasswordSubmit.bind(Object(o.a)(n)),n.service=new b,n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.setState({toggleEdit:!this.state.toggleEdit})}},{key:"handleFormSubmit",value:function(e){var t=this;console.log(this.props),e.preventDefault();var a=this.state,n=a.email,i=a.name,l=this.props.user._id;this.service.edit(n,i,l).then((function(e){t.props.getUser(e),t.setState({toggleEdit:!t.state.toggleEdit})}))}},{key:"handlePasswordSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.password,n=this.props.user._id;this.service.editPassword(a,n).then((function(e){return t.setState({toggleEdit:!t.state.toggleEdit})}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(E.a)({},a,n))}},{key:"render",value:function(){var e=this.props.user;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("h1",null,"Meu Perfil")),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.handleClick},"Editar"),this.state.toggleEdit?i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFormSubmit},i.a.createElement("label",null,"Nome:"),i.a.createElement("input",{onChange:this.handleChange,type:"text",name:"name",value:this.state.name}),i.a.createElement("label",null,"Email:"),i.a.createElement("input",{onChange:this.handleChange,type:"email",name:"email",value:this.state.email}),i.a.createElement("button",{type:"submit"},"Salvar")),i.a.createElement("form",{onSubmit:this.handlePasswordSubmit},i.a.createElement("label",null,"Senha:"),i.a.createElement("input",{onChange:this.handleChange,type:"password",name:"password",value:this.state.password}),i.a.createElement("button",{type:"submit"},"Salvar"))):i.a.createElement("div",null,i.a.createElement("h3",null,"Nome: ",e.name),i.a.createElement("h3",null,"Email: ",e.email),i.a.createElement("img",{src:e.image,alt:e.name}))))}}]),a}(n.Component),M=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={loggedUser:null},n.service=new b,n.getUser=n.getUser.bind(Object(o.a)(n)),n.logout=n.logout.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedUser&&this.service.loggedin().then((function(t){e.setState({loggedUser:t})})).catch((function(t){e.setState({loggedUser:!1})}))}},{key:"getUser",value:function(e){this.setState({loggedUser:e})}},{key:"logout",value:function(){var e=this;this.service.logout().then((function(t){e.setState({loggedUser:null}),e.props.history.push("/")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return this.fetchUser(),i.a.createElement("div",null,this.state.loggedUser?i.a.createElement("div",null,i.a.createElement(g,Object.assign({user:this.state.loggedUser,logout:this.logout},this.props)),i.a.createElement(h.d,null,i.a.createElement(h.b,{exact:!0,path:"/",component:S}),i.a.createElement(O,{exact:!0,path:"/pagina-principal",component:U,user:this.state.loggedUser,getUser:this.getUser}),i.a.createElement(O,{exact:!0,path:"/adicionar-condominio",component:A,user:this.state.loggedUser}),i.a.createElement(O,{exact:!0,path:"/condominio/:id",component:B,user:this.state.loggedUser}),i.a.createElement(O,{exact:!0,path:"/condominio/:id/adicionar-servi\xe7o",component:x,user:this.state.loggedUser}),i.a.createElement(O,{exact:!0,path:"/condominio/:id/servi\xe7o/:servicoId",component:D,user:this.state.loggedUser}),i.a.createElement(O,{exact:!0,path:"/perfil",component:I,user:this.state.loggedUser,getUser:this.getUser}))):i.a.createElement("div",null,i.a.createElement(g,Object.assign({user:this.state.loggedUser,logout:this.logout},this.props)),i.a.createElement(h.d,null,i.a.createElement(h.b,{exact:!0,path:"/signup",render:function(t){return i.a.createElement(f,Object.assign({getUser:e.getUser},t))}}),i.a.createElement(h.b,{exact:!0,path:"/login",render:function(t){return i.a.createElement(C,Object.assign({getUser:e.getUser},t))}}),i.a.createElement(h.b,{component:S}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(m.a,null,i.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.0f971dfa.chunk.js.map